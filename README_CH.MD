[Chinese Version](https://github.com/rosstzc/koudai/blob/master/README_CH.MD)

[English Version](https://github.com/rosstzc/koudai/blob/master/README.md)

# 口袋支点的股票与板块分析

## 关键字说明

- 口袋支点：是指股票的某个价格形态，投资者用这个价格形态来作为市场动向发生变化的指标。口袋支点是依据股票过去一段时间的价格动态，根据一定规则计算出来的信号，通常作为趋势走强的信号指标。
- 股票板块：股票市场板块是一组彼此有很多共同点的股票，通常是因为它们处于相似的行业、相似概念等属性。
- 通达信：国内知名股票软件，功能丰富，支持各种股票图表分析、自定义选股等。
- tableau：一个专业的数据可视化工具

## 项目介绍

在股票市场（中国股票市场大概有3～4千个股票），每个股票会根据所属概念、行业等共同点归类到多个板块，根据通达信板块分类规则目前有300多个板块。每天都会有一定数量的股票出现口袋支点信号，本项目的目的就是通过分析每个板块里出现口袋支点的股票数，连续统计每天的股票数，形成板块的口袋支点股票数走势，从而帮助判断某个板块是否有走强趋势。

项目实现过程思考：

之前一直在使用通达信来做每天的口袋支点选股，当想到要了解板块的口袋支点股票数量时，发现在通达信无法实现，因为通达信的选股公式都是针对个票，而不能针对板块。理论上可以每个板块（选股范围）进行选股一次，这样得到每个板块内到口袋支点股票数，但这样手工工作量太多，每天都要手工执行300多次选股，然后还要导出数据再处理，显然劳动量太大不可行。

所以想到了导出一次所有口袋支点股票，并且提前把板块与股票关系数据导出和处理，这样有了每天的支点股票列表和股票与板块关系表，就能运算得到板块内的支点股票数，然后再把每天数据合并得到各板块的支点股票数走势。在这些数据基础上，可以对板块进行排序，比如根据支点股票数对板块排序、根据支点股票数比例对板块排序，还可以计算板块内支点股票数的分位点，找到某天支点股票数大于某个分为点板块等等。

在数据呈现方面，我也大概了解python画图相关的库，我的需求既要呈现表格，又要呈现走势图，感觉画图库来实现既费时效果也不见得好，因此，基于简单有保障思路，我直接选用tableau做数据呈现，毕竟他是专业做数据可视化的，我要做的就是尽量用python把数据处理好，然后导出excel，让tableau来做可视化的表格或走势等。

还有一点补充，其实也思考过不用通达信而是直接用python来选出口袋支点股票的方案，这样程序就可以自动完成，而不用现在要每天从通达信导出一次口袋支点股票数据。但这里问题是口袋支点本身的选股公式比较复杂，若是python来实现也将非常费时，所以考虑后还是决定分开执行。

## 项目实现步骤：

1. 从通达信导出板块列表、个股列表（含所属板块信息），然后统计出每个板块所包含的股票。
2. 从通达信导出每天出现口袋支点信号的股票列表，结合步骤1的结果进计算，得到每个板块的支点股票数量走势。（说明：口袋支点信号并没有标准答案，每个人都可以有自己的规则）
3. 用图表方式呈现走势，并且通过各种规则排序或筛选，得到自己认为可能有走强趋势的板块。（我实际上是通过tableau来做可视化呈现和分析）

### 应用到的技术：

1. python主要是用panda库，比如excel读取/导出，dataframe数据处理
2. tableau的的数据可视化

## 项目体会：

这是一个自用的项目，满足了自己对股票板块分析的目标（这个目标对股票投资的意义，本项目不讨论）。

项目的主要python代码是200行，主要就是做了数据处理的工作，并没有复杂的逻辑。若要说较难的地方，主要在于思考哪些数据应该用什么方式或工具来处理，比如在通达信导出时，我花了不少时间来研究这个工具究竟能提供哪些数据和应该如何处理；又比如用python处理数据时，我把一些排序逻辑的结果直接写到表，这样tableau就不用再实现排序逻辑，从而提升数据可视化性能。

总的来说，我认为工具项目的首要任务时以短平快实现目标，其次要考虑在可用性、可维护性方面取得平衡。虽然这个项目涉及到3个工具，但这是我认为最容易实现目标方案，其次在可用性方面也是可以接受，手工操作工作量就是固定每天点按钮导出一次数据，然后pyhon处理一次数据。当然若作为一个可共享給她人并直接工具来考虑的话，它还差很远。

## 注意事项：

本项目是完整的开发项目，能够直接在本地运行，里面的功能逻辑是基于我的思考，其他人可能并不适用。若对项目感兴趣，可以下载到本地查看一下代码，提取一些可能有参考价值的代码或思路。

## 项目一些截图展示
1 数据处理后的数据列表：按日期生成相应板块的支点股票数，并根据板块的支点股票数、支点股票数占比(出现支点的股票占整个板块股票的比例)进行排序
![koudai1](https://user-images.githubusercontent.com/5052733/201505176-509041a7-332a-4165-9a4d-a156e41d2b18.png)



2 查看板块的支点股票数的走势
![2 指定板块的支点数走势](https://user-images.githubusercontent.com/5052733/201504688-c6faee74-5f38-48bc-adf6-68e19cf91201.png)
3 根据某天的支点股票占比来对板块进行排序， 比如下图2021年10月13日，“HJT电池”是支点股票占比最高
![按日期查看支点比例排序](https://user-images.githubusercontent.com/5052733/201504819-e884a1b5-0208-401d-b190-06a63079e7e7.png)

4 按日期来查看有口袋支点的股票所关联的板块
![当天支点所在板块的支点走势](https://user-images.githubusercontent.com/5052733/201504865-b13e3f7c-d841-4d84-8cf3-55dde97ee3fb.png)

